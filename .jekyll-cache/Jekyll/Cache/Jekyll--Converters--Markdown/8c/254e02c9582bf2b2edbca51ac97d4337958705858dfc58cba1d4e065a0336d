I"<blockquote>
  <p>내 지갑에서 아마존이 돈을 가져갈 수도 있다.</p>
</blockquote>

<h2 id="tools">Tools</h2>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Windows 10</code> , <code class="language-plaintext highlighter-rouge">Ubuntu 18.04</code> /
<code class="language-plaintext highlighter-rouge">AWS</code> , <code class="language-plaintext highlighter-rouge">EC2</code> , <code class="language-plaintext highlighter-rouge">IAM</code> , <code class="language-plaintext highlighter-rouge">CLI</code></li>
</ul>

<h2 id="1-prologue--issue">1. Prologue &amp; Issue</h2>
<hr />
<p>아마존 EC2 클라우드 컴퓨터는 <strong>제한된 시간</strong>(750 h/m, <a href="!https://aws.amazon.com/ko/ec2/pricing/?trkCampaign=acq_paid_search_brand&amp;sc_channel=PS&amp;sc_campaign=acquisition_KR&amp;sc_publisher=Google&amp;sc_category=Cloud%20Computing&amp;sc_country=KR&amp;sc_geo=APAC&amp;sc_outcome=acq&amp;sc_detail=ec2%20free%20tier&amp;sc_content={ad%20group}&amp;sc_matchtype=e&amp;sc_segment=489215168080&amp;sc_medium=ACQ-P|PS-GO|Brand|Desktop|SU|Cloud%20Computing|EC2|KR|EN|Sitelink&amp;s_kwcid=AL!4422!3!489215168080!e!!g!!ec2%20free%20tier&amp;ef_id=Cj0KCQiA3Y-ABhCnARIsAKYDH7ssdyuTAUALOrZol8_ujQhh5xYy9GMFgpIZD3uGssn7iOp49h6L66EaAtjWEALw_wcB:G:s&amp;s_kwcid=AL!4422!3!489215168080!e!!g!!ec2%20free%20tier">가격 정책</a>)만큼 무료 서비스를 제공한다.<br />
나는 현재 <code class="language-plaintext highlighter-rouge">(1)</code> 슬랙에 식단 봇을 매 오전 10시마다 cronlab 스케쥴러로 실행시키는 서버와 <code class="language-plaintext highlighter-rouge">(2)</code> 0주차 프로젝트의 웹서비스를 작동시킬 서버, <code class="language-plaintext highlighter-rouge">(3)</code> 현재 mallocLab을 진행하는 서버 총 3개의 서버를 작동시키고 있다. 곧 청구서가 날라올 것만 같은 상태이다.</p>

<p>나는 <bold>"EC2 서버를 쓰지 않을 때는 종료하고 사용하고 싶을 때만 켜고 싶다"</bold> 라는 생각으로 Instance Scheduler를 찾아보았으나 나의 작업 시간이 무작위적이기 때문에 수동으로 직접 켜고 꺼주는 방법을 사용해야했다. <strong>콘솔의 GUI를 통해 직접 이를 구동하는 방법은 너무 비효율적이고 번거로웠다.</strong> 😨 그 작은 오버헤드를 줄이고자 여기서는 AWS CLI를 이용하기로 했다.</p>
<h2 id="2-aws-cli-설치하기">2. AWS CLI 설치하기</h2>
<hr />
<p><code class="language-plaintext highlighter-rouge">AWS CLI</code>는 말그대로 AWS가 제공하는 Commnad Line Interface이다. 우리가 터미널을 통해 AWS Console에서 제공하는 많은 기능들을 명령어로 사용할 수 있다는 의미이다.</p>

<p>이 부분을 진행하기 이전에 OS 별로 설정이 필요로 할 것 같다. 나는 현재 Local의 <code class="language-plaintext highlighter-rouge">Windows</code> 에서 EC2 instance의 <code class="language-plaintext highlighter-rouge">Ubuntu</code> 를 <bold>"실행"</bold>할 때와 EC2 instance의 <code class="language-plaintext highlighter-rouge">Ubuntu</code> 상에서 <bold>"중지"</bold>를 하게 되기 때문에 이 절차를 따르기 위해 내 Local 과 EC2 instance 모두에 <code class="language-plaintext highlighter-rouge">awscli</code> 를 인스톨 하도록 한다. <del>버전이 두가지가 있지만 CLI2 를 받았다</del></p>

<ul>
  <li>
    <p>windows env<br />
<a href="!https://awscli.amazonaws.com/AWSCLIV2.msi">msi 파일</a>을 다운받아 설치해분다.</p>
  </li>
  <li>
    <p>ubuntu env</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>awscli
</code></pre></div>    </div>
    <p>인스톨이 완료되면 CLI를 사용할 준비가 완료된다.😁</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws <span class="nt">--version</span> <span class="c"># 무언가 버젼번호가 출력되면 설치가 된 것이다.</span>
</code></pre></div>    </div>
    <p>이외의 환경은 다음 <a href="!https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html">링크</a>를 참조하면 된다.</p>
  </li>
</ul>

<h2 id="3-aws-iam-보안-자격-증명">3. AWS IAM 보안 자격 증명!</h2>
<hr />
<p>CLI를 통해 접근하기 위해서 <code class="language-plaintext highlighter-rouge">aws IAM</code>이란 것을 통해 보안 자격 증명을 하게 된다.</p>

<h2 id="4">4.</h2>
<hr />

<h2 id="5-additional">5. Additional</h2>
<hr />
<h3 id="-new-issue">📌 New Issue</h3>

<p>instance 가 중지되었다가 다시 실행되면 public IP가 변경이 되는데, 이에 맞게 config 되어있는 모든 것들에 대해 변경해야할 소요가 생긴다.</p>

<blockquote>
  <p>❓ 예를들면, 현재 VSC 상에서 <code class="language-plaintext highlighter-rouge">simple-ftp</code> extension으로 22번 포트를 통해 파일을 수정하고 있는데 <code class="language-plaintext highlighter-rouge">simple-ftp</code> configuration 파일에 있는 public IP 주소를 매번 수정해야 한다는 번거로움이 있다. <del>돈을 내면 이 문제를 해결할 수 있다.</del></p>
</blockquote>

<p>❗ <a href="!">해결 방안</a><bold>을 포스트 해보았다.</bold></p>

<h2 id="6-epilogue">6. Epilogue</h2>
<hr />

<h2 id="7-reference">7. Reference</h2>
<hr />
<p>AWS CLI :: <a href="!https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html">amazon AWS</a><br />
AWS S3 CLI - Could not connect to the endpoint URL :: <a href="!https://stackoverflow.com/questions/40409683/aws-s3-cli-could-not-connect-to-the-endpoint-url">StackOverFlow</a><br />
Get public IP address via awscli :: <a href="!https://serverfault.com/questions/971990/how-to-find-out-an-ec2-instances-private-and-public-ip-via-aws-cli">StackExchange</a></p>
:ET